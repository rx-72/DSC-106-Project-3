import pandas as pd 
import altair as alt
import os
import numpy as np
import numpy as np
import random
import matplotlib.pyplot as plt 
import seaborn as sns
from matplotlib.colors import LogNorm, Normalize

energy_fp = os.path.join('data', 'owid-energy-data.csv')
energy = pd.read_csv(energy_fp)

solar = energy[["country", "year", "solar_cons_change_pct", "solar_cons_change_twh", "solar_consumption", "solar_elec_per_capita", "solar_electricity", "solar_energy_per_capita", "solar_share_elec", "solar_share_energy"]]

count = ["Brazil", "South Korea", "France", "Spain", "Italy", "Australia", "India", "Japan", "Germany", "United States", "China"]

top_solar = solar[(solar["country"].isin(count)) & (solar["year"] > 1990)]

top_solar['solar_share_elec_log'] = top_solar["solar_share_elec"].apply(lambda x: np.log(x))

solar_pivot = (top_solar.pivot(index="country", 
                                  columns="year", 
                                  values="solar_share_elec_log"))
neg_inf = solar_pivot[2001]["Brazil"]
solar_pivot = (top_solar.pivot(index="country", 
                                  columns="year", 
                                  values="solar_share_elec_log")).replace(neg_inf, -8)

// heatmap based on years and selected importantn subset of countries. Colored boxes represent the share of electricity generated that year for each country out of total year

// idea to interactable by hovering each cell to get specific information.
ax = sns.heatmap(solar_pivot, vmin=-8, vmax=3, linecolor='white', linewidth=0.5)
